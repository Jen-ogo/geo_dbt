version: 2

models:
  - name: dim_tomtom_ev_stations
    description: "TomTom EV charging stations dimension (GOLD). Raw POI payload + parsed address + coordinates. NOTE: UPDATED_AT has known parsing issues in Snowflake for some API values."

    tests:
      - rowcount_gt_0
      - not_empty

    columns:
      - name: TOMTOM_POI_ID
        description: "TomTom POI identifier."
        tests:
          - not_null

      - name: CHARGING_AVAILABILITY_ID
        description: "TomTom availability identifier (may be null depending on payload)."

      - name: NAME
        description: "Station name."

      - name: BRAND
        description: "Brand/operator."

      - name: CATEGORY
        description: "TomTom POI category."

      - name: COUNTRY_CODE
        description: "ISO country code."

      - name: COUNTRY_SUBDIVISION
        description: "Country subdivision / region."

      - name: MUNICIPALITY
        description: "Municipality/city."

      - name: STREET
        description: "Street name."

      - name: STREET_NUMBER
        description: "Street number."

      - name: POSTAL_CODE
        description: "Postal code."

      - name: FREEFORM_ADDRESS
        description: "Freeform address."

      - name: LAT
        description: "Latitude (WGS84)."
        tests:
          - not_null

      - name: LON
        description: "Longitude (WGS84)."
        tests:
          - not_null

      - name: CONNECTORS_STATIC_JSON
        description: "Connectors static JSON as string."

      - name: RAW_POI_JSON
        description: "Raw POI JSON payload (variant/json)."
        tests:
          - not_null

      - name: UPDATED_AT
        description: "Update timestamp from API/ingest. Known issue: Snowflake may fail to read some values; may be temporarily nulled/fixed later."
        